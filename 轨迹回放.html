<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no, width=device-width">
    <title>轨迹回放</title>
    <link rel="stylesheet" href="https://a.amap.com/jsapi_demos/static/demo-center/css/demo-center.css"/>
    <style>
        html, body, #container {
            height: 100%;
            width: 100%;
        }

        .input-card .btn{
            margin-right: 1.2rem;
            width: 9rem;
        }

        .input-card .btn:last-child{
            margin-right: 0;
        }
    </style>
</head>
<body>
<div id="container"></div>
<div class="input-card">
    <h4>轨迹回放控制</h4>
    <div class="input-item">
        <input type="button" class="btn" value="开始动画" id="start" onclick="startAnimation()"/>
        <input type="button" class="btn" value="暂停动画" id="pause" onclick="pauseAnimation()"/>
    </div>
    <div class="input-item">
        <input type="button" class="btn" value="继续动画" id="resume" onclick="resumeAnimation()"/>
        <input type="button" class="btn" value="停止动画" id="stop" onclick="stopAnimation()"/>
    </div>
</div>
<script type="text/javascript" src="https://webapi.amap.com/maps?v=1.4.15&key=b5051e51eaf87ccc3bbb3181370063df"></script>
<script>
    // var marker, lineArr = [[116.478935,39.997761],[116.478939,39.997825],[116.478912,39.998549],[116.478912,39.998549],[116.478998,39.998555],[116.478998,39.998555],[116.479282,39.99856],[116.479658,39.998528],[116.480151,39.998453],[116.480784,39.998302],[116.480784,39.998302],[116.481149,39.998184],[116.481573,39.997997],[116.481863,39.997846],[116.482072,39.997718],[116.482362,39.997718],[116.483633,39.998935],[116.48367,39.998968],[116.484648,39.999861]];
    var marker, lineArr = [[104.07513, 30.72724], [104.07513, 30.72702], [104.07504, 30.72672], [104.07497, 30.7263], [104.07497, 30.72582], [104.07496, 30.72544], [104.07489, 30.72487], [104.07476, 30.72456], [104.07457, 30.72434], [104.07434, 30.72406], [104.07422, 30.72379], [104.07424, 30.72351], [104.07449, 30.72315], [104.07481, 30.723], [104.07506, 30.72298], [104.07539, 30.72301], [104.07576, 30.72308], [104.07611, 30.72309], [104.07649, 30.72302], [104.0769, 30.72291], [104.0774, 30.72278], [104.07779, 30.72268], [104.07819, 30.72259], [104.07848, 30.72252], [104.07929, 30.72236], [104.07968, 30.72227], [104.08053, 30.72204], [104.08107, 30.72189], [104.08155, 30.72176], [104.0822, 30.72159], [104.08269, 30.72146], [104.08317, 30.72134], [104.08348, 30.72125], [104.08396, 30.72113], [104.08443, 30.721], [104.08488, 30.72088], [104.08537, 30.72076], [104.08586, 30.72062], [104.08637, 30.72049], [104.08687, 30.72035], [104.08752, 30.72018], [104.08802, 30.72], [104.08853, 30.71978], [104.08906, 30.71965], [104.08944, 30.71957], [104.08996, 30.71947], [104.09049, 30.7194], [104.09101, 30.71932], [104.09155, 30.71925], [104.09211, 30.7192], [104.09287, 30.71913], [104.0934, 30.7191], [104.09389, 30.71909], [104.09439, 30.71907], [104.09485, 30.71905], [104.09513, 30.71904], [104.09552, 30.71902], [104.09585, 30.719], [104.0962, 30.71898], [104.09661, 30.71896], [104.09704, 30.71895], [104.09763, 30.71893], [104.09837, 30.7189], [104.09873, 30.71888], [104.09893, 30.71887], [104.09925, 30.71885], [104.09962, 30.71884], [104.09999, 30.71882], [104.10034, 30.7188], [104.10066, 30.7188], [104.10077, 30.71877], [104.10077, 30.71866], [104.10075, 30.71844], [104.10073, 30.71829], [104.10068, 30.71796], [104.10066, 30.71783], [104.1006, 30.71763], [104.10055, 30.71744], [104.10055, 30.71729], [104.10056, 30.71724], [104.1008, 30.71721], [104.10121, 30.71709], [104.10157, 30.71697], [104.10192, 30.71685], [104.1022, 30.71675], [104.10249, 30.71668], [104.10267, 30.71667], [104.10294, 30.71671], [104.10359, 30.71673], [104.10381, 30.71667], [104.10403, 30.71659], [104.10415, 30.71655], [104.10422, 30.71638], [104.10413, 30.71615], [104.10405, 30.71596], [104.10398, 30.71578], [104.10386, 30.7155], [104.10374, 30.7152], [104.10367, 30.71486], [104.10359, 30.71468], [104.10354, 30.71458], [104.10354, 30.71457], [104.10353, 30.71454], [104.10352, 30.71453], [104.10352, 30.71453], [104.10352, 30.71453], [104.10352, 30.71453], [104.10352, 30.71453], [104.10352, 30.71453], [104.10352, 30.71453], [104.10352, 30.71453], [104.10352, 30.71453], [104.10352, 30.71453], [104.10352, 30.71453], [104.10352, 30.71453], [104.10352, 30.71453], [104.10352, 30.71453], [104.10352, 30.71453], [104.10352, 30.71452], [104.10348, 30.71444], [104.10343, 30.71433], [104.10337, 30.71421], [104.10329, 30.71403], [104.10323, 30.7139], [104.10312, 30.71364], [104.10301, 30.7134], [104.10286, 30.71308], [104.10274, 30.71281], [104.10265, 30.71262], [104.10255, 30.71239], [104.10245, 30.7122], [104.10231, 30.71192], [104.10216, 30.71163], [104.10197, 30.71126], [104.10181, 30.711], [104.10163, 30.71071], [104.10148, 30.71043], [104.10133, 30.71018], [104.10115, 30.70989], [104.10099, 30.70961], [104.10054, 30.70903], [104.10039, 30.70881], [104.1002, 30.70851], [104.10001, 30.70822], [104.09997, 30.70816], [104.09994, 30.70811], [104.09994, 30.70811], [104.09994, 30.70811], [104.09994, 30.70811], [104.09994, 30.70811], [104.09994, 30.70811], [104.09994, 30.7081], [104.09994, 30.7081], [104.09993, 30.7081], [104.09993, 30.7081], [104.09993, 30.7081], [104.09993, 30.7081], [104.09993, 30.7081], [104.09993, 30.7081], [104.09993, 30.7081], [104.09993, 30.7081], [104.09993, 30.7081], [104.09993, 30.7081], [104.09993, 30.70809], [104.09993, 30.70809], [104.0999, 30.70804], [104.09984, 30.70796], [104.09978, 30.70786], [104.09974, 30.7078], [104.09965, 30.70765], [104.09982, 30.7072], [104.10005, 30.70709], [104.10027, 30.70693], [104.10041, 30.70671], [104.10055, 30.7065], [104.10064, 30.70634], [104.10083, 30.70603], [104.10114, 30.70549], [104.1013, 30.70521], [104.10148, 30.70491], [104.10179, 30.70438], [104.10195, 30.70411], [104.10205, 30.70393], [104.1021, 30.70385], [104.10212, 30.70381], [104.10213, 30.70379], [104.10213, 30.70379], [104.10213, 30.70379], [104.10213, 30.70379], [104.10213, 30.70379], [104.10213, 30.70379], [104.10213, 30.70379], [104.10213, 30.70379], [104.10213, 30.70379], [104.10213, 30.70379], [104.10213, 30.70379], [104.10221, 30.70368], [104.1023, 30.70354], [104.10244, 30.70331], [104.10261, 30.70304], [104.10272, 30.70282], [104.10292, 30.70245], [104.10305, 30.70213], [104.10317, 30.70183], [104.10334, 30.7015], [104.10376, 30.70084], [104.10398, 30.70051], [104.10428, 30.70021], [104.10448, 30.69988], [104.1047, 30.69953], [104.10485, 30.69929], [104.10515, 30.69882], [104.10538, 30.69846], [104.1056, 30.69811], [104.10582, 30.69776], [104.10604, 30.69741], [104.10626, 30.69706], [104.10647, 30.69674], [104.10666, 30.69644], [104.1068, 30.69612], [104.10696, 30.69577], [104.10717, 30.69545], [104.10738, 30.69512], [104.10761, 30.69479], [104.10789, 30.69451], [104.1082, 30.69426], [104.10853, 30.69401], [104.10881, 30.6938], [104.10945, 30.69333], [104.10978, 30.69309], [104.11011, 30.69285], [104.11045, 30.69261], [104.11078, 30.69237], [104.11109, 30.69213], [104.11122, 30.692], [104.11122, 30.692], [104.11122, 30.692], [104.11122, 30.692], [104.11125, 30.69197], [104.11122, 30.692], [104.11122, 30.692], [104.11122, 30.692], [104.11073, 30.69252], [104.11069, 30.69255], [104.11062, 30.69271], [104.11058, 30.69278], [104.11048, 30.69284], [104.11039, 30.69291], [104.11026, 30.693], [104.11013, 30.6931], [104.10999, 30.69321], [104.10988, 30.69329], [104.10977, 30.69338], [104.10972, 30.69341], [104.10963, 30.69348], [104.10957, 30.69352], [104.10949, 30.69358], [104.10942, 30.69363], [104.10936, 30.69367], [104.10929, 30.69372], [104.10922, 30.69377], [104.10917, 30.69381], [104.10914, 30.69383], [104.10914, 30.69383]]

    var map = new AMap.Map("container", {
        resizeEnable: true,
        center: [104.07513, 30.72724],
        zoom: 17
    });

    marker = new AMap.Marker({
        map: map,
        position: [104.07513, 30.72724],
        icon: "https://webapi.amap.com/images/car.png",
        offset: new AMap.Pixel(-26, -13),
        autoRotation: true,
        angle:-90,
    });

    // 绘制轨迹
    var polyline = new AMap.Polyline({
        map: map,
        path: lineArr,
        showDir:true,
        strokeColor: "#28F",  //线颜色
        // strokeOpacity: 1,     //线透明度
        strokeWeight: 6,      //线宽
        // strokeStyle: "solid"  //线样式
    });

    var passedPolyline = new AMap.Polyline({
        map: map,
        // path: lineArr,
        strokeColor: "#AF5",  //线颜色
        // strokeOpacity: 1,     //线透明度
        strokeWeight: 6,      //线宽
        // strokeStyle: "solid"  //线样式
    });


    marker.on('moving', function (e) {
        passedPolyline.setPath(e.passedPath);
    });

    map.setFitView();

    function startAnimation () {
        marker.moveAlong(lineArr, 200);
    }

    function pauseAnimation () {
        marker.pauseMove();
    }

    function resumeAnimation () {
        marker.resumeMove();
    }

    function stopAnimation () {
        marker.stopMove();
    }
</script>
</body>
</html>